# Бэкенд для приложения по учету реквизита
Технологии
- SpringBoot(JPA)
- H2
- Maven

В `src/main/java/props` находятся основные пакеты
- `controller` - здесь находится контроллеры, отвечающие за взаимодействие с фронтом
  посредством HTTP-запросов.
- `exception` - содержит исключения которые могут возникнуть при работе приложения.
- `model` - содержит классы, объекты которых сохраняются в базу данных.
- `repository` - задесь находятся интерфейсы которые работаю с базой данных.
- `service` - содержит классы с логикой приложения.

## Пример работы

Запросы делаются из любого http клиента, приложение запущено локально.

Запрос на добавления игры

- URL: *localhost:8080/games/add*
- Mетод: POST
- Тело:
```
{
    "name": "<Название игры>",
    "diplomas": {
        "<Позиция диплома>": <Количество дипомов в наличие>,
        "2": 20,
        "3": 20
    },
     "rules": {
        "<ID формы>": <Количество форм которые нужны для одной игры, одной команде>,
        "2": 2,
        "3": 1
    }
}
```
Пример ответа:
```
{
    "id": 902,
    "name": "klassik",
    "diplomasId": [
        602,
        603,
        604
    ],
    "compositionId": 152
}
```
Composition хранит в себе все правила списания форм.

Запрос на списание реквизита.
- URL: *localhost:8080/games/event*
- Mетод: POST
- Тело:
```
{
  "<ID игры>" : <Количество команд>
  "902": 100
}
```
Oтвет: 200

Запросы для реквизита:
Добавить новую форму в БД.
- URL: *localhost:8080/forms/new*
- Mетод: POST
- Тело:
 ```
{
    "name": "<Название формы>",
    "quantity": <Количество форм>
}
```
Обновить количество форм в БД.
- URL: *localhost:8080/forms/update*
- Mетод: POST
- Тело:
```
{
  "<ID формы>" : <Количество к обновлению>
  "1": 10000
}
```
Получить все формы.
- URL: *localhost:8080/forms*
- Mетод: GET
- Пример ответа:
```
{
[
    {
        "id": <ID формы>,
        "name": "<Название формы>",
        "quantity": <Количество форм>
    },
    {
        "id": 2,
        "name": "Форма 3",
        "quantity": 1000
    },
    {
        "id": 3,
        "name": "Форма 12",
        "quantity": 1000
    }
]
}
```
Обновить количество дипломов в БД.
- URL: *localhost:8080/diplomas/update*
- Mетод: POST
- Тело:
```
{
  "<ID диплома>" : <Количество к обновлению>
  "1": 10000
}
```
Получить все дипломы.
- URL: *localhost:8080/forms*
- Mетод: GET
- Пример ответа:
```
[
    {
        "id": <ID диплома>,
        "position": <Позиция диплома(1,2,3 место)>,
        "quantity": <Количество дипломов>
    },
    {
        "id": 653,
        "position": 2,
        "quantity": 20
    },
    {
        "id": 654,
        "position": 3,
        "quantity": 20
    }
]
```
Получить все дипломы.
- URL: *localhost:8080/forms*
- Mетод: GET
- Пример ответа:
```
[
    {
        "id": <ID правила>,
        "entityId": <ID сущности которую нужно списать>,
        "valueToUse": <Количество сущностей которые нужно списать на одну команду>
    },
    {
        "id": 253,
        "entityId": 2,
        "valueToUse": 2
    }
]
```



